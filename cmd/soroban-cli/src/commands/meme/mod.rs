use clap::Parser;
use rand::seq::SliceRandom;

#[derive(Parser, Debug)]
pub struct Cmd {
    /// Type of meme:hodl, doge, moon, rekt, chad, wojak
    #[arg(long, short = 't', default_value = "random")]
    pub meme_type: String,
}

#[derive(thiserror::Error, Debug)]
pub enum Error {
    #[error("Meme generation failed")]
    MemeGenerationFailed,
}

impl Cmd {
    pub fn run(&self) -> Result<(), Error> {
        let meme = match self.meme_type.as_str() {
            "hodl" => Self::hodl_meme(),
            "doge" => Self::doge_meme(),
            "moon" => Self::moon_meme(),
            "rekt" => Self::rekt_meme(),
            "chad" => Self::chad_meme(),
            "wojak" => Self::wojak_meme(),
            "random" => {
                let memes = vec![
                    Self::hodl_meme(),
                    Self::doge_meme(),
                    Self::moon_meme(),
                    Self::rekt_meme(),
                    Self::chad_meme(),
                    Self::wojak_meme(),
                ];
                memes.choose(&mut rand::thread_rng())
                    .ok_or(Error::MemeGenerationFailed)?
                    .to_string()
            }
            _ => Self::confused_meme(),
        };
        
        println!("\n{}\n", meme);
        Ok(())
    }
    
    fn hodl_meme() -> String {
        r#"
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                        â”‚
    â”‚   HODL YOUR STELLAR                    â”‚
    â”‚   [Ì²Ì…$Ì²Ì…(Ì²Ì… Í¡Â° ÍœÊ– Í¡Â°)Ì²Ì…$Ì²Ì…]                      â”‚
    â”‚                                        â”‚
    â”‚   "I'm not selling!" - Diamond Hands   â”‚
    â”‚                                        â”‚
    â”‚   ğŸ“ˆğŸ“ˆğŸ“ˆ ğŸ’ğŸ™Œ ğŸ“‰ğŸ“‰ğŸ“‰                    â”‚
    â”‚                                        â”‚
    â”‚   Still not selling! ğŸš€                â”‚
    â”‚                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        "#.to_string()
    }
    
    fn doge_meme() -> String {
        r#"
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                        â”‚
    â”‚            such stellar                â”‚
    â”‚                                        â”‚
    â”‚   much blockchain          wow         â”‚
    â”‚                                        â”‚
    â”‚         very decentralized             â”‚
    â”‚                                        â”‚
    â”‚   so smart contract                    â”‚
    â”‚                    many crypto         â”‚
    â”‚                                        â”‚
    â”‚              /\___/\                   â”‚
    â”‚             (  o.o  )                  â”‚
    â”‚              > ^ <                     â”‚
    â”‚                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        "#.to_string()
    }
    
    fn moon_meme() -> String {
        r#"
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                        â”‚
    â”‚         TO THE MOON! ğŸš€ ğŸŒ•             â”‚
    â”‚                                        â”‚
    â”‚              ğŸŒ•                        â”‚
    â”‚           ğŸš€                           â”‚
    â”‚         ğŸš€                             â”‚
    â”‚       ğŸš€                               â”‚
    â”‚     ğŸš€          XLM                    â”‚
    â”‚   ğŸš€                                   â”‚
    â”‚  ğŸŒ                                    â”‚
    â”‚                                        â”‚
    â”‚  [Departure: Any day now...]           â”‚
    â”‚                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        "#.to_string()
    }
    
    fn rekt_meme() -> String {
        r#"
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                        â”‚
    â”‚           R E K T                      â”‚
    â”‚                                        â”‚
    â”‚    â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â”‚
    â”‚    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘â–‘â–ˆâ–ˆâ•”â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•  â”‚
    â”‚    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•â•â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘  â”‚
    â”‚    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–‘â–‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘  â”‚
    â”‚    â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–‘â•šâ–ˆâ–ˆâ•—â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘  â”‚
    â”‚    â•šâ•â•â–‘â–‘â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â–‘â–‘â•šâ•â•â–‘â–‘â–‘â•šâ•â•â–‘â–‘â–‘  â”‚
    â”‚                                        â”‚
    â”‚    "Probably should have DYOR" ğŸ’€      â”‚
    â”‚                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        "#.to_string()
    }
    
    fn chad_meme() -> String {
        r#"
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                        â”‚
    â”‚        Yes.                            â”‚
    â”‚    â €â €â €â €â €â£ â£¶â£¾â£¿â£¿â¢¶â£„â €â €â €â €                        â”‚
    â”‚    â €â €â €â €â¢ â£¿â â €â €â €â €â ˆâ ™â ·â£„â €â €                      â”‚
    â”‚    â €â €â €â €â£¾â¡â €â£¤â£¤â£¤â£„â €â €â €â ™â ·â£„                      â”‚
    â”‚    â €â €â¢€â£´â Ÿâ €â €â €â ˜â£¿â£¿â£¿â¡„â €â €â €â ™â£·                     â”‚
    â”‚    â €â£°â¡¿â â €â €â €â €â €â ¿â ¿â Ÿâ â €â €â €â €â¢¹                     â”‚
    â”‚    â¢°â£¿â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¾                     â”‚
    â”‚                                        â”‚
    â”‚    I use Stellar CLI                   â”‚
    â”‚    I deploy to mainnet on Fridays      â”‚
    â”‚    My tests always pass                â”‚
    â”‚                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        "#.to_string()
    }
    
    fn wojak_meme() -> String {
        r#"
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                        â”‚
    â”‚         â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿                        â”‚
    â”‚         â£¿â£¿â¡Ÿâ¢â£¤â£¤â£€â ˆâ¢¿â£¿â£¿â£¿â£¿â£¿                        â”‚
    â”‚         â£¿â£¿â¡‡â¢¸â£¿â£¿â£¿â£·â ˆâ£¿â£¿â£¿â£¿â£¿                        â”‚
    â”‚         â£¿â£¿â£‡â ˆâ ¿â ¿â ¿â ‹â¢°â£¿â£¿â£¿â£¿â£¿                        â”‚
    â”‚         â£¿â£¿â£¿â£¦â£¤â£¤â£´â£¾â£¿â£¿â£¿â£¿â£¿â£¿                        â”‚
    â”‚                                        â”‚
    â”‚    "Bought the top again..." ğŸ“‰         â”‚
    â”‚                                        â”‚
    â”‚    Me after deploying untested code    â”‚
    â”‚    to production at 3 AM ğŸ˜­            â”‚
    â”‚                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        "#.to_string()
    }
    
    fn confused_meme() -> String {
        r#"
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                        â”‚
    â”‚    Unknown meme type!                  â”‚
    â”‚                                        â”‚
    â”‚        Â¯\_(ãƒ„)_/Â¯                      â”‚
    â”‚                                        â”‚
    â”‚    Try: hodl, doge, moon, rekt,        â”‚
    â”‚         chad, wojak, or random         â”‚
    â”‚                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        "#.to_string()
    }
}
